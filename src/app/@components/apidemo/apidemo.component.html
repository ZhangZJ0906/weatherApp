<!-- åŸå¸‚ -->
<h2 class="text-center text-2xl font-bold my-4">
  {{ city }}
</h2>

<!-- é¸åœ°å€ -->
<div class="flex justify-center mb-4">
  <select
    [(ngModel)]="choseArea"
    (ngModelChange)="areaChange(choseArea)"
    class="bg-gray-50 border border-gray-300 text-sm rounded-lg p-2.5 w-48"
  >
    @for (item of area; track $index) {
      <option [value]="item">{{ item }}</option>
    }
  </select>
</div>

<!-- ===== ç›®å‰å¤©æ°£å¡ç‰‡ (Flowbite Card) ===== -->
<div class="flex flex-col md:flex-row justify-center gap-6 md:gap-10 max-w-5xl mx-auto">
  <div
    class="bg-[oklch(0.66_0.12_182)]/59 rounded-2xl shadow-lg p-6 text-center mb-6"
  >
    <h3 class="text-lg font-semibold mb-3">ç›®å‰å¤©æ°£</h3>

    <!-- icon -->
    <div class="flex justify-center mb-2 h-32">
      @switch (currentWeathercode) {
        @case ("01") {
          <img src="image/clear-day.svg" class="h-full" alt="æƒ…" />
        }
        @case ("04") {
          <img src="image/partly-cloudy-day.svg" class="h-full" alt=" å¤šé›²" />
        }
        @case ("07") {
          <img src="image/cloudy.svg" class="h-full" alt="é™°å¤©" />
        }
        @case ("08") {
          <img
            src="image/partly-cloudy-day-drizzle.svg"
            class="h-full"
            alt="çŸ­æš«é›¨"
          />
        }
      }
    </div>
    <p class="text-gray-500 text-sm">{{ currentTime }}</p>
    <p class="text-3xl font-bold mt-2">{{ currentTemp }}Â°C</p>
    <p class="mt-1">
      é«”æ„Ÿï¼š
      @if (currentAppTemp >= 23) {
        <span class="text-red-500 font-semibold">{{ currentAppTemp }}</span>
      } @else {
        <span class="text-blue-500 font-semibold">{{ currentAppTemp }}</span>
      }
      Â°C
    </p>
    <p class="font-semibold mt-2">{{ currentWeather }}</p>
    <p class="text-gray-500 text-sm">{{ currentWeatherDesc }}</p>
    <p class="text-red-500 text-sm">
      ä¸‰å°æ™‚é™é›¨æ©Ÿç‡:{{ currentProbabilityOfPrecipitation }}%
    </p>
  </div>

  <!-- è²¼å¿ƒæé†’ -->
  <div
    class="max-w-sm mx-auto bg-gradient-to-br from-emerald-200/80 via-sky-200/70 to-blue-300/70 backdrop-blur-xl rounded-3xl shadow-2xl p-6 text-center space-y-5 border border-white/40 transition hover:shadow-3xl hover:-translate-y-1 duration-300"
  >
    <!-- æ¨™é¡Œ -->
    <h3 class="text-xl font-bold tracking-wide">ğŸŒ¤ï¸ è²¼å¿ƒæé†’</h3>

    <!-- ğŸ”¥ ç‚ç†± -->
    @if (currentTemp > 24) {
      <span
        class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-red-100 text-red-600"
      >
        ç‚ç†±
      </span>

      <p class="text-gray-700 font-medium">
        å¤©æ°£åç†±ï¼Œè¨˜å¾—å¤šè£œå……æ°´åˆ†ï¼Œé¿å…ä¸­æš‘èˆ‡æ›æ›¬éä¹… â˜€ï¸
      </p>

      <img
        class="w-32 h-32 mx-auto object-contain drop-shadow-lg"
        src="https://megapx-assets.dcard.tw/images/fae2226e-1cce-4c61-a101-bf86e8f31e34/640.jpeg"
        alt=""
      />
    }

    <!-- ğŸŒ¥ æ¶¼çˆ½ -->
    @else if (currentTemp >= 18 && currentTemp <= 24) {
      <span
        class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-yellow-100 text-yellow-700"
      >
        æ¶¼çˆ½
      </span>

      <p class="text-gray-700 font-medium">
        æ°£æº«å¾®æ¶¼ï¼Œå¤–å‡ºå»ºè­°æ”œå¸¶è–„å¤–å¥—ï¼Œå°å¿ƒè‘—æ¶¼ ğŸŒ¬ï¸
      </p>

      <img
        class="w-32 h-32 mx-auto object-contain drop-shadow-lg"
        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYcTUaDvUly8LUD8tokUq4lyePG_gEl4l15w&s"
        alt=""
      />
    }

    <!-- â„ï¸ å¯’å†· -->
    @else {
      <span
        class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-700"
      >
        å¯’å†·
      </span>

      <p class="text-gray-700 font-medium">
        æ°£æº«åä½ï¼Œæ³¨æ„ä¿æš–ï¼Œå¤šç©¿è¡£ç‰©é¿å…æ„Ÿå†’ â„ï¸
      </p>

      <img
        class="w-32 h-32 mx-auto object-contain drop-shadow-lg"
        src="https://cdn.cdnstep.com/huM92ZJgFwLey0UcU82C/19-1.png"
        alt=""
      />
    }

    <!-- åˆ†éš”ç·š -->
    <div class="border-t border-white/40"></div>

    <!-- ğŸŒ§ï¸ é™é›¨æé†’å€ â­æ–°å¢ -->
    <div class="space-y-3">
      <h4 class="font-semibold text-gray-800">
        ä¸‰å°æ™‚é™é›¨æ©Ÿç‡ {{ currentProbabilityOfPrecipitation }}%
      </h4>

      @if (currentProbabilityOfPrecipitation >= 60) {
        <span
          class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-blue-200 text-blue-800"
        >
          ğŸŒ§ï¸ é«˜æ©Ÿç‡é™é›¨
        </span>
        <p class="text-gray-700">å¾ˆå¯èƒ½ä¸‹é›¨ï¼Œå¤–å‡ºè«‹å‹™å¿…æ”œå¸¶é›¨å‚˜æˆ–é›¨è¡£</p>
      } @else if (currentProbabilityOfPrecipitation >= 30) {
        <span
          class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-sky-100 text-sky-700"
        >
          â˜” å¯èƒ½é™é›¨
        </span>
        <p class="text-gray-700">æœ‰ä¸‹é›¨æ©Ÿæœƒï¼Œå»ºè­°å¸¶æŠŠæŠ˜å‚˜å‚™ç”¨</p>
      } @else {
        <span
          class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-gray-100 text-gray-600"
        >
          ğŸŒ¤ï¸ é™é›¨æ©Ÿç‡ä½
        </span>
        <p class="text-gray-600">å¤©æ°£ç©©å®šï¼ŒåŸºæœ¬ä¸Šä¸ç”¨å¸¶é›¨å…·</p>
      }
    </div>
  </div>
</div>
<!-- é¸æ—¥æœŸ -->
<div class="flex justify-center mb-6">
  <select
    [(ngModel)]="selectedDay"
    (change)="filterByDay(selectedDay)"
    class="bg-gray-50 border border-gray-300 text-sm rounded-lg p-2.5 w-48"
  >
    @for (item of dayOptions; track $index) {
      <option [value]="item">{{ item }}</option>
    }
  </select>
</div>

<!-- ===== æœªä¾†é€å°æ™‚å¡ç‰‡ (Grid + Flowbite Card) ===== -->
<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 px-4">
  @for (data of filteredData; track data.time) {
    <div
      class="bg-black/80 backdrop-blur-md rounded-xl shadow-md p-4 text-center transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-105 hover:shadow-2xl"
    >
      <!-- icon -->
      <div class="h-20 flex justify-center mb-2">
        @switch (data.weatherCode) {
          @case ("01") {
            <img src="image/clear-day.svg" class="h-full" alt="æƒ…" />
          }
          @case ("04") {
            <img src="image/partly-cloudy-day.svg" class="h-full" alt=" å¤šé›²" />
          }
          @case ("07") {
            <img src="image/cloudy.svg" class="h-full" alt="é™°å¤©" />
          }
          @case ("08") {
            <img
              src="image/partly-cloudy-day-drizzle.svg"
              class="h-full"
              alt="çŸ­æš«é›¨"
            />
          }
        }
      </div>

      <p class="text-xs text-white">{{ data.time }}</p>

      <p class="font-bold mt-1 text-white">{{ data.temperature }}Â°C</p>

      <p class="text-sm">
        <span class="text-white">é«”æ„Ÿ: </span>
        @if (data.apparentTemperature >= 23) {
          <span class="text-red-500">{{ data.apparentTemperature }}</span>
        } @else {
          <span class="text-blue-500">{{ data.apparentTemperature }}</span>
        }
        Â°C
      </p>

      <p class="text-gray-400 text-xs mt-1">
        {{ data.weatherDes }}
      </p>
      <p class="text-red-500 text-sm">
        ä¸‰å°æ™‚é™é›¨æ©Ÿç‡:{{ data.probabilityOfPrecipitation }}
      </p>
    </div>
  }
</div>
