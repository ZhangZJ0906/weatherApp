<!-- 城市 -->
<h2 class="text-center text-2xl font-bold my-4">
  {{ city }}
</h2>

<!-- 選地區 -->
<div class="flex justify-center mb-4">
  <select [(ngModel)]="choseArea" (ngModelChange)="areaChange(choseArea)"
    class="bg-gray-50 border border-gray-300 text-sm rounded-lg p-2.5 w-48">

    @for (item of area; track $index) {
    <option [value]="item">{{ item }}</option>
    }
  </select>
</div>

<!-- ===== 目前天氣卡片 (Flowbite Card) ===== -->
<div class="max-w-sm mx-auto bg-[oklch(0.66_0.12_182)]/59 rounded-2xl shadow-lg p-6 text-center mb-6">

  <h3 class="text-lg font-semibold mb-3">目前天氣</h3>

  <!-- icon -->
  <div class="flex justify-center mb-2 h-32">
    @switch (currentWeathercode) {
    @case ("01") { <img src="image/clear-day.svg" class="h-full" /> }
    @case ("04") { <img src="image/partly-cloudy-day.svg" class="h-full" /> }
    @case ("07") { <img src="image/cloudy.svg" class="h-full" /> }
    @case ("08") { <img src="image/partly-cloudy-day-drizzle.svg" class="h-full" /> }
    }
  </div>

  <p class="text-gray-500 text-sm">{{ currentTime }}</p>

  <p class="text-3xl font-bold mt-2">
    {{ currentTemp }}°C
  </p>

  <p class="mt-1">
    體感：
    @if(currentAppTemp >= 23){
    <span class="text-red-500 font-semibold">{{ currentAppTemp }}</span>
    }@else{
    <span class="text-blue-500 font-semibold">{{ currentAppTemp }}</span>
    }°C
  </p>

  <p class="font-semibold mt-2">{{ currentWeather }}</p>
  <p class="text-gray-500 text-sm">{{ currentWeatherDesc }}</p>

</div>

<!-- 選日期 -->
<div class="flex justify-center mb-6">
  <select [(ngModel)]="selectedDay" (change)="filterByDay(selectedDay)"
    class="bg-gray-50 border border-gray-300 text-sm rounded-lg p-2.5 w-48">

    @for (item of dayOptions; track $index) {
    <option [value]="item">{{ item }}</option>
    }
  </select>
</div>

<!-- ===== 未來逐小時卡片 (Grid + Flowbite Card) ===== -->
<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 px-4">

  @for (data of filteredData; track data.time) {

  <div class="bg-black rounded-xl shadow-md p-4 text-center hover:shadow-lg transition">

    <!-- icon -->
    <div class="h-20 flex justify-center mb-2">
      @switch (data.weatherCode) {
      @case ("01") { <img src="image/clear-day.svg" class="h-full" /> }
      @case ("04") { <img src="image/partly-cloudy-day.svg" class="h-full" /> }
      @case ("07") { <img src="image/cloudy.svg" class="h-full" /> }
      @case ("08") { <img src="image/partly-cloudy-day-drizzle.svg" class="h-full" /> }
      }
    </div>

    <p class="text-xs text-white">{{ data.time }}</p>

    <p class="font-bold mt-1 text-white">
      {{ data.temperature }}°C
    </p>

    <p class="text-sm">
      <span class="text-white">體感: </span>
      @if(data.apparentTemperature >= 23){
      <span class="text-red-500">{{ data.apparentTemperature }}</span>
      }@else{
      <span class="text-blue-500">{{ data.apparentTemperature }}</span>
      }°C
    </p>

    <p class="text-gray-400 text-xs mt-1">
      {{ data.weatherDes }}
    </p>

  </div>

  }
</div>